<?php

/**
 * Test class for matching questions.
 */
class MatchingTestCase extends QuizQuestionTestCase {

  protected $questionPlugin = 'matching';

  public static function getInfo() {
    return array(
        'name'        => t('Matching'),
        'description' => t('Unit test for matching question type.'),
        'group'       => t('Quiz'),
    );
  }

  public function setUp($modules = array(), $admin_permissions = array(), $user_permissions = array()) {
    $modules[] = 'matching';
    parent::setUp($modules, $admin_permissions, $user_permissions);
  }

  /**
   * function to create true false type question node for testing.
   */
  public function testCreateQuizQuestion() {
    $settings = array(
        'type'           => $this->questionPlugin,
        'title'          => $this->randomName(),
        'body'           => $this->randomString(),
        'revisions'      => TRUE,
        'choice_penalty' => 0,
    );

    $this->match = array();
    // generate rand match question, answer and feedback
    for ($i = 1; $i < variable_get('quiz_matching_form_size', 5); $i++) {
      $settings['match'][$i]['question'] = $this->match[$i]['question'] = $this->randomName();
      $settings['match'][$i]['answer'] = $this->match[$i]['answer'] = $this->randomName();
      $settings['match'][$i]['feedback'] = $this->match[$i]['feedback'] = $this->randomName();
    }

    // create drupal node
    // @TODO verify save
    $question = $this->drupalCreateQuestion($settings);
    return quiz_question_entity_load($question->qid);
  }

}
